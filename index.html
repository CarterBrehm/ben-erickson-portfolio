<!doctype html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="Ben Erickson's Design Portfolio" />
		<meta
			name="apple-mobile-web-app-status-bar-style"
			content="black-translucent"
		/>
		<title>Ben Erickson</title>
		<style>
			a {
				color: inherit;
				text-decoration: none;
			}
			body {
				display: flex;
				flex-direction: column;
				height: 100vh;
				margin: 0;
				font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial,
					"Noto Sans", sans-serif, "Apple Color Emoji",
					"Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
				font-weight: bold;
				overflow: hidden;
			}
			.hero {
				height: 40vh;
				display: flex;
				justify-content: center;
				align-items: center;
				font-size: calc(10px + 8vmin);
			}
			.squares-container {
				height: 60vh;
				overflow-x: auto;
				overflow-y: hidden;
				display: flex;
				gap: 20px;
				padding: 20px;
			}
			.square {
				flex: 0 0 auto;
				width: calc(100vw - 40px);
				height: calc(100vw - 40px);
				border-radius: 8px;
				max-width: calc(60vh - 40px);
				max-height: calc(60vh - 40px);
				cursor: pointer;
				position: relative;
				overflow: hidden;
			}
			.square::before {
				content: "";
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background-size: cover;
				background-position: center;
				transition: opacity 0.5s ease;
			}
			.square::after {
				content: "";
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background-size: cover;
				background-position: center;
				opacity: 0;
				transition: opacity 0.5s ease;
			}
			@media (hover: hover) {
				.square:hover::before {
					opacity: 0;
				}
				.square:hover::after {
					opacity: 1;
				}
			}
			
			/* Mobile - show hover state when centered */
			@media (hover: none) {
				.square.in-view::before {
					opacity: 0;
				}
				.square.in-view::after {
					opacity: 1;
				}
			}
			@media (min-width: 1200px) {
				.square {
					width: calc((60vh - 120px) / 3);
					height: calc((60vh - 120px) / 3);
				}
			}
			ul {
				display: flex;
				justify-content: center;
				padding: 0;
				list-style-type: none;
				margin: 10px 0;
			}
			ul li {
				margin: 0 10px;
			}
			@media (prefers-color-scheme: dark) {
				body {
					background-color: #454545;
					color: #f8f8ff;
					transition: background-color 0.5s ease-in-out;
					-webkit-transition: background-color 0.5s ease-in-out;
					-moz-transition: background-color 0.5s ease-in-out;
					-o-transition: background-color 0.5s ease-in-out;
					-ms-transition: background-color 0.5s ease-in-out;
				}
			}
			@media (prefers-color-scheme: light) {
				body {
					background-color: #f8f8ff;
					color: #454545;
					transition: background-color 0.5s ease-in-out;
					-webkit-transition: background-color 0.5s ease-in-out;
					-moz-transition: background-color 0.5s ease-in-out;
					-o-transition: background-color 0.5s ease-in-out;
					-ms-transition: background-color 0.5s ease-in-out;
				}
			}
		</style>
	</head>
	<body>
		<div class="hero">Ben Erickson</div>
		<div class="squares-container">
			<div
				class="square"
				style="background-image: url(&quot;squares/as1.jpg&quot;)"
			></div>
			<div
				class="square"
				style="background-image: url(&quot;squares/bs1.jpg&quot;)"
			></div>
			<div
				class="square"
				style="background-image: url(&quot;squares/cs1.jpg&quot;)"
			></div>
			<div
				class="square"
				style="background-image: url(&quot;squares/ds1.jpg&quot;)"
			></div>
			<div
				class="square"
				style="background-image: url(&quot;squares/es1.jpg&quot;)"
			></div>
			<div
				class="square"
				style="background-image: url(&quot;squares/fs1.jpg&quot;)"
			></div>
		</div>
		<script>
			document.querySelectorAll(".square").forEach((square) => {
				const originalImage =
					square.style.backgroundImage.match(/url\("([^"]+)"\)/)[1];
				const hoverImage = originalImage.replace("s1", "s2");

				square.style.backgroundImage = ""; // Clear the direct background
				square.style.setProperty("--image1", `url("${originalImage}")`);
				square.style.setProperty("--image2", `url("${hoverImage}")`);

				// Set the background images on pseudo-elements
				const style = document.createElement("style");
				const squareId =
					"square-" + Math.random().toString(36).substr(2, 9);
				square.id = squareId;
				style.textContent = `
					#${squareId}::before { background-image: var(--image1); }
					#${squareId}::after { background-image: var(--image2); }
				`;
				document.head.appendChild(style);
			});

			// Only setup intersection observer on mobile
			if (window.matchMedia('(hover: none)').matches) {
				const observer = new IntersectionObserver(
					(entries) => {
						entries.forEach((entry) => {
							// Calculate how centered the element is
							if (entry.isIntersecting) {
								const rect = entry.target.getBoundingClientRect();
								const viewportCenter = window.innerWidth / 2;
								const elementCenter = rect.left + rect.width / 2;
								const distanceFromCenter = Math.abs(viewportCenter - elementCenter);
								
								// If element is roughly centered (within 50px)
								if (distanceFromCenter < 50) {
									entry.target.classList.add('in-view');
								} else {
									entry.target.classList.remove('in-view');
								}
							} else {
								entry.target.classList.remove('in-view');
							}
						});
					},
					{
						threshold: 0.8,
						root: document.querySelector('.squares-container')
					}
				);

				// Observe all squares
				document.querySelectorAll('.square').forEach((square) => {
					observer.observe(square);
				});
			}
		</script>
	</body>
</html>
